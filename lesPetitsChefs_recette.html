<!DOCTYPE html>
<html>
<head>
	<meta http-equiv="Content-Type" content="text/html;charset=UTF-8" />
	<title>Les petits chefs</title>
	<link rel="stylesheet" type="text/css" href="lesPetitsChefs_main.css">
	<link rel="stylesheet" type="text/css" href="lesPetitsChefs_recette.css">
	<script src="lesPetitsChefs_recettes.js"></script>
	<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
  	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
  	<script src="lesPetitsChefs_utils.js"></script>
</head>
<body>

	<h1 class="titre"></h1>

	<img class="imgMenu" onclick="displayMenu()" src="burgerldpi.png"/>
	<div class="navbar">
		<img class="closeSidebar" onclick="displayMenu()" src="close_sidebar.png"/>
		<img class="logo	" src="logo.png"/>
		<ul class="listeOnglet">
			<li><a href="lesPetitsChefs_recettesByType.html?type=appéritifs"><img src="apperitifs.png"></img></a></li>
			<li><a href="lesPetitsChefs_recettesByType.html?type=entrées">entrée</a></li>
			<li><a href="lesPetitsChefs_recettesByType.html?type=plats">plat</a></li>
			<li><a href="lesPetitsChefs_recettesByType.html?type=desserts"><img src="dessert.png"></a></li>
		</ul>
	</div>
	<div class="containerPrincipal">
		<div class=enTete></div>
		<div class="corp">
			<h2>Ingrédients :</h2>
			<div class="ingredients"></div>
			<h2>Préparation :</h2>
			<div class="preparation"></div>
		</div>


	</div>

<script type="text/javascript">

	var url_String = window.location.href;
	var url = new URL(url_String);
	var nom = url.searchParams.get("nom");
	var type = url.searchParams.get("type");

	function printIngredients(ingredients, typeIngredients){
		var ul = "";
		if(typeIngredients != "")
			ul = "<p>"+typeIngredients+" : </p> <ul>"

		for(var i=0; i<ingredients.length;i++){
			console.log(ingredients[i])
			var li = 	"<li>"+ingredients[i]+"</li>"
			ul += li

		}
		ul += "</ul>";
		$(ul).appendTo($('.ingredients'));
	}

	function printPreparation(preparation, typePreparation){
		var ul = "";
		if(typePreparation != "")
			ul = '<p>'+typePreparation+' : </p> <ul>'

		var numero
		for(var i=0; i<preparation.length;i++){
			numero = i+1;
			console.log(preparation[i])
			var li = 	"<li>"+numero+" : "+preparation[i]+"</li>"
			ul += li

		}
		ul += "</ul>";
		$(ul).appendTo($('.preparation'));
	}

	function printEnTete(recette){
		var enTete = '<img src="'+recette.image+'"></img>'
		$(enTete).appendTo($('.enTete'));
	}

	function printRecette(recette){
		if(recette == null){
			var pErreur = "<p>Erreur la recette n'existe pas</p>";
			$(pErreur).appendTo($('.containerPrincipal'));

		}else{
			printEnTete(recette)
			for(var typeIngredients in recette.ingredients){
				printIngredients(recette.ingredients[typeIngredients],typeIngredients)

			}
			for(var typePreparation in recette.preparation){
				printPreparation(recette.preparation[typePreparation], typePreparation)
			}

		}
	}

	//add nom to titre
	var pNom = "<p>"+nom+"</p>";
	$(pNom).appendTo($('.titre'));

	switch(type){
		case "apperitifs":
			var recette = jsonRecettesApperitifs[nom]
			printRecette(recette)
			break;
		case "plats":
			var recette = jsonRecettesPlats[nom]
			printRecette(recette)
			break;
		case "desserts":
			var recette = jsonRecettesDesserts[nom]
			printRecette(recette)
			break;
	}







</script>

</body>
</html>
